# Twisk

A : Twisk est une application de simulation à évènement discrète, elle permet de visualiser le déplacement des clients dans un monde composé d’Activité et de Guichet reliés entre elle par des chemins. Les activités ne peuvent contenir plus d’un certains nombre de clients, ils sont donc précédés par un ou plusieurs guichets qui vont servir de file d’attente et empêché l’arrivé de clients jusqu’à ce qu’une place ne soit libéré.

N : L’interface de l’application nous permet de modéliser un monde de plusieurs façon, on peut par exemple ajouté des activités et des guichets, les déplacer , leur assigner un paramètre, en du temps passé dans l’activité ainsi le nombre maximum de clients qui peuvent y accéder en même temps. On peut également les renommer, et les supprimer. L’application nous permet aussi de sauvegarder un monde et de pouvoir recharger à tout moment. Elle permet ensuite de dire le nombre de clients et de définir leur arrivé selon la loi uniforme, normale ou exponentielle.  Néanmoins un tel liberté nécessite que l’on impose y des contraintes.

A : Pour lancer une application le monde doit obligatoirement disposer au moins d’une entrée par lequel les clients accède pour rentrer dans le monde, et d’au moins une sortie pour la quitter. Une activité précédés par un guichet que l’on appel une ActiviteRestreinte ne peut pas être précédé par une autre Activité. Le monde doit pouvoir contenir des arcs qui représente les chemins mené par les clients. Les chemins générés doivent permettre au clients de relié l’entrée à la sortie.

N : Il existe encore d’autre contraintes à Twisk, mais nous en reparlerons un peu plus vers la fin de la vidéo . Avec l’application Twisk on peut par exemple simuler la circulation des clients dans un parc d’attraction, un aéroport, un magasin ou pourquoi pas une boulangerie. Un bouton start et stop permet au clients de lancer la simulation et de l’arrêter pour pouvoir la modifier. 

A : Ce projet qui a pris 5 moins à réaliser pour les étudiants en L2 est bien plus complexe qu’il ne paraît. Déjà pour commencer il ne relève pas  tout simplement d’un projet java coder en architecture MVC pour Model View Controller, un client est un processus qui a été généré à partir d’un code C. Le projet fait donc appel à Java Native Interface qui est une bibliothèque intégrée nativement au JDK de Java, qui permet au code Java d’appeler des applications natives., en l’occurrence ici en C. A partir du fichier compilé client.o et d’un autre programme programmeC.o, on crée un librairie dynamique qui va contenir les fonctions nécessaire au fonctionnement de la simulation. A l’exécution l’éditeur ira chercher le code nécessaire dans le fichier de la librairie.

N : Il existe une contrainte concernant la génération de cette librairie, lorsqu’on lance un simulation on charge un librairie avec le code C qui contient les fonctions pour cette simulation, si ensuite on souhaite lancé un deuxième simulation, une deuxième librairie va être crée, néanmoins  l’éditeur va toujours faire appel à la première librairie qui a été crée. Une solution proposé est de créer un classLoader personnel sous classe de classLoader. Grâce à cette solution la première librairie créer va pouvoir être retiré de la mémoire car elle a été détruite en même temps que la sous classe ClassLoaderPerso qui l’a chargé. Une deuxième contrainte du projet est que tout le code de l’application java est exécuté par un processus qui ne peut pas en même temps gérer la mis à jour du modèle et la mis à jour de l’interface. Une solution à ce problème et de départager son exécution en deux processus qui s ‘exécutent en parallèle. Un premier processus qui va servir à mettre à jour le modèle et un deuxième qui va servir à mettre à jour l’interface graphique.


A : Assez parlez de la partie conception, passons maintenant à la partie utilisation, Twisk n’est pas une application efficace pour tout type de simulation, par exemple il ne peut pas gérer les circuits et du à son mécanisme de fonctionnement un Guichet ne peut pas servir de file d’attente à deux Activité. De même deux activité ne peuvent pas se rejoindre en un Guichet.



